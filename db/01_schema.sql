


CREATE TABLE TIPOS_PASAJE (
    ID_TIPO_PASAJE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRIPCION VARCHAR2(50) NOT NULL UNIQUE,
    PORCENTAJE_DESCUENTO NUMBER(5,2) DEFAULT 0 CHECK (PORCENTAJE_DESCUENTO >= 0 AND PORCENTAJE_DESCUENTO <= 100)
);

CREATE TABLE RUTAS (
    ID_RUTA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_RUTA VARCHAR2(100) NOT NULL,
    ORIGEN VARCHAR2(50) NOT NULL,
    DESTINO VARCHAR2(50) NOT NULL,
    PRECIO_BASE NUMBER(10,2) NOT NULL CHECK (PRECIO_BASE > 0)
);

CREATE TABLE UNIDADES (
    ID_UNIDAD NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NUMERO_DISCO VARCHAR2(10) NOT NULL UNIQUE,
    PLACA VARCHAR2(20) NOT NULL UNIQUE,
    CAPACIDAD NUMBER(3) NOT NULL CHECK (CAPACIDAD > 0)
);

-- 3. TABLA TRANSACCIONAL (Con Foreign Keys)



CREATE TABLE PASAJES (
    ID_PASAJE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FECHA_EMISION DATE DEFAULT SYSDATE NOT NULL,
    FECHA_VIAJE DATE NOT NULL,
    ID_RUTA NUMBER NOT NULL,
    ID_UNIDAD NUMBER NOT NULL,
    ID_TIPO_PASAJE NUMBER NOT NULL,
    VALOR_FINAL NUMBER(10,2) NOT NULL CHECK (VALOR_FINAL >= 0),
    NOMBRE_PASAJERO VARCHAR2(100) DEFAULT 'CONSUMIDOR FINAL',
    CONSTRAINT FK_PASAJE_RUTA FOREIGN KEY (ID_RUTA)
        REFERENCES RUTAS(ID_RUTA),
    CONSTRAINT FK_PASAJE_UNIDAD FOREIGN KEY (ID_UNIDAD)
        REFERENCES UNIDADES(ID_UNIDAD),
    CONSTRAINT FK_PASAJE_TIPO FOREIGN KEY (ID_TIPO_PASAJE)
        REFERENCES TIPOS_PASAJE(ID_TIPO_PASAJE)
);



COMMIT;